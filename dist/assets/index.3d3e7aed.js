!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const e=()=>{const e=document.createElement("section");return e.classList.add("logoSection"),e.append((()=>{const e=document.createElement("img");return e.classList.add("logo"),e.src="/images/logo.png",e.alt="Breaking Bad logo",e.onclick=()=>{document.location.reload()},e})()),e},t=e=>{const t=document.createElement("div");t.classList.add("modeMenu");const n=["Characters","Quotes","Deaths"].map((t=>((e,t)=>{const n=document.createElement("button");return n.classList.add("modeMenu__button"),n.textContent=e,n.addEventListener("click",(()=>{n.parentElement.removeActive(),n.classList.add("modeMenu__button--active"),t(e)})),n})(t,e)));return t.removeActive=()=>{n.forEach((e=>e.classList.remove("modeMenu__button--active")))},n[0].classList.add("modeMenu__button--active"),t.append(...n),t},n=(e,t,n)=>{const s=[];for(;s.length!=n;){const n=Math.floor(Math.random()*(t-e+1)+e);s.includes(n)||s.push(n)}return s},s=e=>e[Math.floor(Math.random()*e.length)];const a=e=>{const t=[...e.map((({answer:e})=>e))];for(;1!==t.length;){const e=t.pop();if(t.includes(e))return!1}return!0},o=async e=>{const t={},o=await async function(e){const t=await fetch(`https://breakingbadapi.com/api/${e}`),n=await t.json();return"characters"===e?(e=>e.map((({name:e,img:t})=>({answer:e,questionObject:t}))))(n):"quotes"===e?(e=>e.map((({quote:e,author:t})=>({answer:t,questionObject:e}))))(n):"deaths"===e?(e=>e.map((({death:e,cause:t})=>({answer:e,questionObject:t}))))(n):void 0}(e.toLowerCase()),c=[],r=[],d={};return t.getQuestion=e=>(d[e]=void 0===d[e]?0:d[e]+1,r.length===d[e]&&(()=>{let e,t,d;do{e=n(0,o.length-1,4),t=s(e);const c=e.map((e=>o[e]));d=a(c)}while(!d||c.includes(t));c.push(t),r.push({answers:o.filter(((t,n)=>e.includes(n))).map((({answer:e})=>e)),correctAnswer:o[t].answer,questionObject:o[t].questionObject})})(),r[d[e]]),t},c=()=>({name:"",answers:[],currentQuestionIndex:0,type:"HUMAN",askQuestion(e,t){e(t)},answer(e,t){e(t)}});function r(e,t){return!(!t||e!==t)}const d=()=>{const e=c();return e.type="COMPUTER",e.answers=[],e.name="Tuco",e.isGameFinished=!1,e.askQuestion=(t,n)=>{e.questionAndAnswersToAnswer=t,e.isGameFinished||setTimeout((()=>{e.answer();const s=e.randomAnswer,a=r(t.correctAnswer,s);n({isCorrect:a,answer:s},e)}),1e3)},e.answer=()=>{e.randomAnswer=s(e.questionAndAnswersToAnswer.answers)},e},i={Characters:{category:"Characters",question:"Who is this character?",specialRule:"who from Breaking Bad is shown on the photo."},Quotes:{category:"Quotes",question:"Who said this quote?",specialRule:"who from Breaking Bad said quote's words."},Deaths:{category:"Deaths",question:"Who died this way?",specialRule:"who from Breaking Bad died in described way."}},l="Characters",u=(e,t)=>{const n=document.createElement("section");n.classList.add("answersSection");let{correctAnswer:s,answers:a}=e;const o=a.map((e=>(e=>{const t=document.createElement("button");return t.classList.add("answersSection__answer"),t.textContent=e,t.setCorrect=()=>{t.classList.add("answersSection__answer--correct")},t.setWrong=()=>{t.classList.add("answersSection__answer--wrong")},t.addClickEvent=e=>{t.addEventListener("click",e)},t.setNewAnswer=e=>{t.textContent=e,t.classList.remove("answersSection__answer--correct"),t.classList.remove("answersSection__answer--wrong")},t})(e))),c=()=>{const[e]=o.filter((e=>r(s,e.textContent)));return e},d=({target:e})=>{if(c().classList.contains("answersSection__answer--correct"))return;const n=r(s,e.textContent);e.setWrong(),c().setCorrect(),setTimeout((()=>t(n,e.textContent)),400)};return o.forEach((e=>{e.addClickEvent(d)})),n.setNewQuestionAnswers=e=>{a=e.answers,s=e.correctAnswer,a.forEach(((e,t)=>{o[t].setNewAnswer(e)}))},n.append(...o),n},m=e=>{const t=document.createElement("h3");return t.classList.add("textQuestion"),t.setNewText=e=>{t.textContent=e},t.setNewText(e),t},p=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd"],h=(e,t)=>{const n=document.createElement("div");n.classList.add("gameSection"),n.timer=(()=>{const e=document.createElement("div");e.classList.add("timer");const t=document.createElement("div");t.classList.add("timer__number"),e.appendChild(t);const n=document.createElement("div");return n.classList.add("timer__text"),e.appendChild(n),e.updateTime=e=>{t.textContent=e,n.textContent=p[e-1]},e})();const s={answers:["","","",""],questionObject:"",correctAnswer:""};e===l?n.classList.add("gameSection--image"):n.classList.add("gameSection--text");const a=u(s,t),o=e===l?((e="https://images.amcnetworks.com/amc.com/wp-content/uploads/2015/04/cast_bb_700x1000_walter-white-lg.jpg")=>{const t=document.createElement("div");t.classList.add("mainImageContainer");const n=document.createElement("img");return n.classList.add("mainImageContainer__image"),n.setAttribute("alt","Image of the questioned character"),t.appendChild(n),t.setImage=e=>{n.src=e},t.setImage(e),t})(s.questionObject):m(s.questionObject);e!==l&&o.classList.add("question--text");const c=m(i[e].question),r=document.createElement("div");return r.classList.add("gameSection__questionAndTimer"),r.append(c,n.timer),n.changeQuestion=t=>{e===l?o.setImage(t.questionObject):o.setNewText(t.questionObject),a.setNewQuestionAnswers(t)},n.append(r,o,a),n},g=(e,t)=>{const n=document.createElement("button");n.classList.add("mainMenuButton");const s=document.createElement("span");return s.classList.add("mainMenuButton__text"),s.textContent=e,n.appendChild(s),n.addEventListener("click",t),n},C=e=>JSON.parse(localStorage.getItem(e))||[],w=e=>{const t=document.createElement("section");t.classList.add("rankSection");const n=document.createElement("h2");n.classList.add("rankSection__category");const s=document.createElement("div");return s.classList.add("rankSection__ranks"),t.changeRanks=e=>{n.textContent=`Ranking: ${e}`;const t=C(e),a=t.sort(((e,t)=>e.score>t.score?-1:1)).slice(0,t.length>20?20:t.length).map(((e,t)=>((e,t)=>{const n=document.createElement("div");n.classList.add("rankRecord");const s=document.createElement("span");n.classList.add("rankRecord__name");const a=document.createElement("span");return n.classList.add("rankRecord__score"),s.textContent=`${e}. ${t.name}`,a.textContent=`${t.score}`,n.append(s,a),n})(t+1,e)));s.innerHTML="",s.append(...a)},t.changeRanks(e),t.append(n,s),t},_=(e,t,n)=>{const s=document.createElement("div");s.classList.add("endOfGameModalContent"),s.onCloseButtonClick=()=>{},s.onShowResultButtonClick=()=>{},s.setOnModalClose=e=>{s.onCloseButtonClick=e},s.setOnChangeContent=e=>{s.onShowResultButtonClick=e};const a=document.createElement("p");a.classList.add("endOfGameModalContent__gameOver"),a.textContent="Game Over!";const o=e=>e.filter((e=>e.isCorrect)).length,c=e=>{const t=o(e);return 0===t?0:Math.floor(t/15*100)},r=document.createElement("p");var d;r.classList.add("endOfGameModalContent__gameStats"),r.textContent=`The purity of your results is ${c(t)}%.\n    You've taken the #${d=o(t),C(e).filter((e=>e.score>d)).length+1} spot in the ranking. A competing dealer scored ${c(n)}%. What is your name?`;const i=document.createElement("div");i.classList.add("endOfGameModalContent__form");const l=document.createElement("input");l.type="text",l.placeholder="Type your name here...",l.classList.add("endOfGameModalContent__input");const u=document.createElement("button");u.classList.add("endOfGameModalContent__button","endOfGameModalContent__button--closeButton"),u.innerText="Accept";const m=document.createElement("button");m.classList.add("endOfGameModalContent__button","endOfGameModalContent__button--showResultsButton"),m.innerText="Accept and show results";const p=(t,n)=>0===t.length?(alert("You can't go undercover all the time. Tell us your name!"),!1):(((e,t,n)=>{const s=C(e),a={name:t,score:n};s.push(a);const o=JSON.stringify(s);localStorage.setItem(e,o)})(e,t,n),!0),h=(e,a)=>{p(e,a)&&s.onShowResultButtonClick(((e,t)=>{const n=document.createElement("div");n.classList.add("resultModalContent");const s=document.createElement("button");s.classList.add("closeButton"),s.textContent="Close",n.setOnModalClose=e=>{s.onclick=e};const a=document.createElement("table");a.classList.add("table");const o=document.createElement("tr");o.classList.add("table__header");const c=document.createElement("th");c.classList.add("table__header__number"),c.textContent="No";const r=document.createElement("th");r.textContent="Player",r.classList.add("table__header__column");const d=document.createElement("th");d.textContent="Computer",d.classList.add("table__header__column"),o.append(c,r,d),a.append(o);const i=e.length>=t.length?e.length:t.length;for(let l=0;l<i;l+=1){const n=document.createElement("tr");n.classList.add("table__dataRow");const s=document.createElement("td");s.textContent=l+1,s.classList.add("table__dataRow__number");const o=document.createElement("td"),c=document.createElement("span");c.textContent=e[l]?e[l].answer:"No answer",o.classList.add(e[l]&&e[l].isCorrect?"correct":"wrong"),o.classList.add("table__dataRow__column"),o.append(c);const r=document.createElement("td"),d=document.createElement("span");d.textContent=t[l]?t[l].answer:"No answer",r.classList.add(t[l]&&t[l].isCorrect?"correct":"wrong"),r.classList.add("table__dataRow__column"),r.append(d),n.append(s,o,r),a.append(n)}return n.append(a,s),n})(t,n))};return u.addEventListener("click",(()=>{return e=l.value,n=o(t),void(p(e,n)&&s.onCloseButtonClick());var e,n})),m.addEventListener("click",(()=>h(l.value,o(t)))),i.append(l,u,m),s.append(a,r,i),s},L=()=>{const e=document.createElement("section");e.classList.add("mainSection");const t=document.createElement("section");t.classList.add("mainSection__mainMenuSection");const n=document.createElement("div");n.classList.add("mainSection__contentSection");const s=w(l),a=(e=>{const t=document.createElement("section");t.classList.add("rulesSection");const n=document.createElement("h3");n.classList.add("rulesSection__category");const s=document.createElement("h4");s.classList.add("rulesSection__question");const a=document.createElement("p");return a.classList.add("rulesSection__rules"),t.changeRules=e=>{n.textContent=`Rules: ${i[e].category}`,s.textContent=i[e].question,a.textContent=`You have one minute to answer fifteen questions. During the game on each question you need to select ${i[e].specialRule} The correct answer will be shown to you after giving the answer. If you want to go to the next question then click again.`},t.changeRules(e),t.append(n,s,a),t})(l);let r,u="Characters";const m=()=>{s.changeRanks(u)},p=g("Ranking",(()=>{n.removeChild(a),n.appendChild(s),t.removeChild(p),t.appendChild(C)})),C=g("Rules",(()=>{n.removeChild(s),n.appendChild(a),t.removeChild(C),t.appendChild(p)})),L=g("New Game",(()=>{e.removeChild(t),e.removeChild(n),e.game=((e,t,n)=>{const s={currentQuestion:{},questionHistory:[],gameMode:"Characters",humanPlayer:c(),computerPlayer:d(),questionGenerator:{},interval:!1,onHumanAnswer:e=>{s.onAnswerCheck(e,s.humanPlayer)}},a=()=>{s.secondsLeft-=1,s.secondsLeft<0?s.endGame():n(s.secondsLeft)};s.startTiming=()=>{s.interval=setInterval(a,1e3)};const r=e=>{e.currentQuestionIndex+=1;const n=s.questionGenerator.getQuestion(e.name);s.currentQuestion=n,"HUMAN"===e.type?e.askQuestion(t,n):"COMPUTER"===e.type&&e.askQuestion(n,s.onAnswerCheck)};return s.startGame=async()=>{s.questionGenerator=await o(s.gameMode),s.secondsLeft=60,n(s.secondsLeft),r(s.computerPlayer),r(s.humanPlayer)},s.onAnswerCheck=(e,t)=>{t.answers.push(e);const n=15===t.currentQuestionIndex;"COMPUTER"===t.type&&n||("HUMAN"===t.type&&n?s.endGame():r(t))},s.endGame=()=>{clearInterval(s.interval),s.computerPlayer.isGameFinished=!0,s.interval=!1,e()},s})(v,f,b),e.game.gameMode=u,r=h(e.game.gameMode,E),e.append(r),e.game.startGame()}));t.append(L,p),n.append(a),e.append(t),e.append(n),e.changeMode=e=>{a.changeRules(e),s.changeRanks(e),u=e};const E=(t,n)=>{e.game.onHumanAnswer({isCorrect:t,answer:n})},v=()=>{e.removeChild(r),e.appendChild(t),e.appendChild(n);const s=((e,t,n=(()=>{}))=>{const s=document.createElement("div"),a=document.createElement("section");s.classList.add("overlay"),a.classList.add("modalPopup"),s.append(a);const o=()=>{t.removeChild(s),n()};return e.setOnModalClose(o),e.setOnChangeContent((t=>{a.removeChild(e),t.setOnModalClose(o),a.append(t)})),a.append(e),s})(_(e.game.gameMode,e.game.humanPlayer.answers,e.game.computerPlayer.answers),e,m);e.appendChild(s)},f=t=>{e.game.interval||e.game.startTiming(),r.changeQuestion(t)},b=e=>{r.timer.updateTime(e)};return t.append(L,p),n.append(a),e.append(t),e.append(n),e},E=()=>{const n=document.createElement("section"),s=document.createElement("section"),a=document.createElement("section");n.classList.add("mainWrapper"),s.classList.add("mainWrapper__upperSection"),a.classList.add("mainWrapper__lowerSection"),n.appendChild(s),n.appendChild(a);const o=L();return s.appendChild(e()),s.appendChild((e=>{const n=document.createElement("section");return n.classList.add("chooseGameSection"),n.appendChild(t(e)),n})((e=>{o.changeMode(e)}))),a.appendChild(o),n};document.querySelector("#app").appendChild(E()),document.querySelector("#app").appendChild((()=>{const e=document.createElement("div");return e.classList.add("background"),e})());
